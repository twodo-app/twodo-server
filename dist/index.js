parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"/ZIk":[function(require,module,exports) {
module.exports={OK:200,CREATED:201,NO_CONTENT:204,NOT_MODIFIED:304,BAD_REQUEST:400,UNAUTHORISED:401,FORBIDDEN:403,NOT_FOUND:404,CONFLICT:409,INTERNAL_SERVER_ERROR:500};
},{}],"jx0t":[function(require,module,exports) {
const t=require("shortid"),{OK:s,CREATED:o,BAD_REQUEST:e,NOT_FOUND:d}=require("../status.js");module.exports={get:{all:t=>(o,e)=>{const d=t.get("todos").value();e.status(s).json(d)},filtered:t=>(t,s)=>{s.json(`This is all the todos filtered by: ${Object.keys(t.query)}`)},byID:t=>(o,e)=>{const i=t.get("todos").find({id:o.params.id}).value();null==i?e.status(d).json({}):e.status(s).json(i)}},post:{create:s=>(d,i)=>{if(!d.body)return i.sendStatus(e);const n={id:t.generate(),title:d.body.title||"",description:d.body.description||"",priority:d.body.priority||0,snoozed:d.body.snoozed||!1,complete:d.body.complete||!1};s.get("todos").push(n).write(),i.status(o).json(n)},update:t=>(o,e)=>{const i=t.get("todos").find({id:o.params.id}).value();if(!i)return e.sendStatus(d);for(const t in i)i[t]=o.body[t]||i[t];t.get("todos").find({id:o.params.id}).assign(i).write(),e.status(s).json(i)}}};
},{"../status.js":"/ZIk"}],"6KBv":[function(require,module,exports) {
module.exports={todos:require("./todos.js")};
},{"./todos.js":"jx0t"}],"np2C":[function(require,module,exports) {
module.exports={get:{all:s=>(s,e)=>{e.json("This is all the todos")},filtered:s=>(s,e)=>{e.json(`This is all the todos filtered by: ${Object.keys(s.query)}`)},byID:s=>(s,e)=>{e.json(`This is the todo with the id: ${s.params.id}`)}},post:s=>(s,e)=>{}};
},{}],"Ouoj":[function(require,module,exports) {
module.exports={todos:require("./todos.js")};
},{"./todos.js":"np2C"}],"VO5s":[function(require,module,exports) {
const e={test:require("./test/index.js"),v1:require("./v1/index.js")};module.exports=(t=>{switch(t){case"test":return console.log("loading test api"),e.test;case"v1":return console.log("loading v1 api"),e.v1;default:return e.test}});
},{"./test/index.js":"6KBv","./v1/index.js":"Ouoj"}],"Focm":[function(require,module,exports) {
const e=require("express"),o=require("body-parser"),t=require("shortid"),r=require("lowdb"),s="test"===process.env.VERSION?require("lowdb/adapters/Memory"):require("lowdb/adapters/FileSync"),i="db",d=process.env.PORT||3e3,p=process.env.VERSION,n=`/api/${p}`,a=r(new s("db.json"));"test"!==p?a.defaults({todos:[]}).write():a.defaults({todos:[{id:t.generate(),title:"Do a twodoo",description:"",priority:4,snoozed:!1,complete:!1},{id:t.generate(),title:"Do a mewtwo",description:"",priority:2,snoozed:!1,complete:!1},{id:t.generate(),title:"Do a poopoo",description:"",priority:3,snoozed:!1,complete:!1},{id:t.generate(),title:"Do a bamboo",description:"",priority:0,snoozed:!1,complete:!1}]}).write();const l=e();l.use(o.json());const c=require("./api")(p);l.get(`${n}/todos`,c.todos.get.all(a)),l.get(`${n}/todos/filter?`,c.todos.get.filtered(a)),l.get(`${n}/todos/:id`,c.todos.get.byID(a)),l.post(`${n}/todos`,c.todos.post.create(a)),l.post(`${n}/todos/:id`,c.todos.post.update(a)),l.listen(d,()=>{console.log(`Server running on port ${d}`)});
},{"./api":"VO5s"}]},{},["Focm"], null)
//# sourceMappingURL=/index.map