parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"S6ww":[function(require,module,exports) {
const e=require("shortid"),t={id:String,title:String,description:String,priority:Number,created:Number,due:Number,estimated:Number,timetaken:Number,snoozed:Boolean,complete:Boolean},r={title:String,description:String,priority:Number,created:Number,due:Number,estimated:Number},i=e=>Object.keys(t).reduce((i,o)=>(typeof e[o]==typeof t[o]()||typeof e[o]==typeof r[o]())&&i,!0),o=t=>({id:e.generate(),title:t.title,description:t.description,priority:t.priority,created:t.created,due:t.due,estimated:t.estimated,timetaken:0,snoozed:!1,complete:!1}),d=()=>o({title:"I am a mock twodo",description:"Use me to test the API!",priority:3*Math.random()|0,created:Date.now(),due:Date.now()+1e5*Math.random(),estimated:Date.now()+1e5*Math.random()});module.exports={validate:i,create:o,mock:d};
},{}],"/ZIk":[function(require,module,exports) {
module.exports={OK:200,CREATED:201,NO_CONTENT:204,NOT_MODIFIED:304,BAD_REQUEST:400,UNAUTHORISED:401,FORBIDDEN:403,NOT_FOUND:404,CONFLICT:409,INTERNAL_SERVER_ERROR:500};
},{}],"jx0t":[function(require,module,exports) {
const t=require("shortid"),{OK:s,CREATED:e,BAD_REQUEST:o,NOT_FOUND:d}=require("../status.js"),a=require("../todo.js");module.exports={get:{all:t=>(e,o)=>{const d=t.get("todos").value();o.status(s).json(d)},filtered:t=>(t,s)=>{s.json(`This is all the todos filtered by: ${Object.keys(t.query)}`)},byID:t=>(e,o)=>{const a=t.get("todos").find({id:e.params.id}).value();null==a?o.status(d).json({}):o.status(s).json(a)}},post:{create:t=>(s,d)=>{if(!s.body)return d.sendStatus(o);if(!a.validate(s.body))return d.sendStatus(o);const r=a.create(s.body);t.get("todos").push(r).write(),d.status(e).json(r)},update:t=>(e,r)=>{const i=t.get("todos").find({id:e.params.id}).value();if(!i)return r.sendStatus(d);if(!e.body)return r.sendStatus(o);if(!a.validate(e.body))return r.sendStatus(o);for(const t in i)i[t]=e.body[t]||i[t];t.get("todos").find({id:e.params.id}).assign(i).write(),r.status(s).json(i)}}};
},{"../status.js":"/ZIk","../todo.js":"S6ww"}],"6KBv":[function(require,module,exports) {
module.exports={todos:require("./todos.js")};
},{"./todos.js":"jx0t"}],"np2C":[function(require,module,exports) {
module.exports={get:{all:s=>(s,e)=>{e.json("This is all the todos")},filtered:s=>(s,e)=>{e.json(`This is all the todos filtered by: ${Object.keys(s.query)}`)},byID:s=>(s,e)=>{e.json(`This is the todo with the id: ${s.params.id}`)}},post:s=>(s,e)=>{}};
},{}],"Ouoj":[function(require,module,exports) {
module.exports={todos:require("./todos.js")};
},{"./todos.js":"np2C"}],"VO5s":[function(require,module,exports) {
const e={test:require("./test/index.js"),v1:require("./v1/index.js")};module.exports=(t=>{switch(t){case"test":return console.log("loading test api"),e.test;case"v1":return console.log("loading v1 api"),e.v1;default:return e.test}});
},{"./test/index.js":"6KBv","./v1/index.js":"Ouoj"}],"Focm":[function(require,module,exports) {
const e=require("express"),o=require("body-parser"),s=require("cors"),t=require("shortid"),r=require("lowdb"),d="test"===process.env.VERSION?require("lowdb/adapters/Memory"):require("lowdb/adapters/FileSync"),i=require("./api/todo.js"),n="db",p=process.env.PORT||3e3,u=process.env.VERSION,c=`/api/${u}`,a=r(new d("db.json"));"test"!==u?a.defaults({todos:[]}).write():a.defaults({todos:[i.mock(),i.mock(),i.mock(),i.mock()]}).write();const l=e();l.use(o.json()),"dev"===u&&l.use(s());const q=require("./api")(u);l.get(`${c}/todos`,q.todos.get.all(a)),l.get(`${c}/todos/filter?`,q.todos.get.filtered(a)),l.get(`${c}/todos/:id`,q.todos.get.byID(a)),l.post(`${c}/todos`,q.todos.post.create(a)),l.post(`${c}/todos/:id`,q.todos.post.update(a)),l.listen(p,()=>{console.log(`Server running on port ${p}`)});
},{"./api/todo.js":"S6ww","./api":"VO5s"}]},{},["Focm"], null)
//# sourceMappingURL=/index.map